+++
title = "The Embedded Working Group Newsletter - 14"
date = 2018-10-28
draft = false
in_search_index = true
template = "page.html"
+++

This is the fourteenth newsletter of the [Embedded WG] where we highlight new progress, celebrate cool projects, thank the community, and advertise projects that need help!

This is a special "spotlight" edition of the newsletter, where we look at a few topics in a bit more detail. Let us know what you think of the new format, and if there is anything you'd like to see included in [the next newsletter]!

[Embedded WG]: https://github.com/rust-embedded/wg

Discuss on [users.rust-lang.org], [on twitter], or [on reddit]!

[users.rust-lang.org]: #
[on twitter]: #
[on reddit]: #
[the next newsletter]: https://github.com/rust-embedded/blog/issues/22

<!-- more -->

## The Newest Embedded WG Team: Cortex-A!

<hr>

![Screenshot of Cortex-A RFC][cortex-a-screenshot]

<hr>

[cortex-a-screenshot]: ../screenshot-cortex-a.png

The Embedded Working Group has launched a Cortex-A team, to focus on supporting developers working on bare-metal, micro kernel, and other low-level tasks using ARM's Cortex-A series of microprocessors.

The team kicked off with four members: [@andre-richter], [@parched], [@raw-bin], and [@wizofe], and have already started assembling initial [goals for their team].

[goals for their team]: https://github.com/rust-embedded/wg/milestone/5
[@andre-richter]: https://github.com/andre-richter
[@parched]: https://github.com/parched
[@raw-bin]: https://github.com/raw-bin
[@wizofe]: https://github.com/wizofe


## The Monotron visits Rust Belt Rust

<hr>

<blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="en" dir="ltr">Astonishing. Smashed my high score! <a href="https://t.co/WG9FXc8Kao">pic.twitter.com/WG9FXc8Kao</a></p>&mdash; Jonathan Pallant (@therealjpster) <a href="https://twitter.com/therealjpster/status/1053698944360951813?ref_src=twsrc%5Etfw">October 20, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<hr>

[@thejpster]'s project, the [monotron], travelled to Ann Arbor Michigan for [Rust Belt Rust 2018]. Since its [last conference appearance], it has gained a whole new [list of features], including a serial application loader, a 3 channel wave table synthesizer, Atari Joystick support, and more!

Check out the video above for a demo of Snake on the monotron hardware.

[Rust Belt Rust 2018]: https://rust-belt-rust.com/
[@thejpster]: https://github.com/thejpster
[monotron]: https://github.com/thejpster/monotron
[last conference appearance]: https://www.youtube.com/watch?v=pTEYqpcQ6lg
[list of features]: https://twitter.com/therealjpster/status/1055187256091332608

## Peripheral Ownership Woes? Not with `shared-bus`!

<hr>

```rust
extern crate shared_bus;

// Create your bus peripheral as usual:
// let i2c = I2c::i2c1(dp.I2C1, (scl, sda), 90.khz(), clocks, &mut rcc.apb1);

let manager = shared_bus::CortexMBusManager::new(i2c);

// You can now acquire bus handles:
let mut handle = manager.acquire();
// handle implements `i2c::{Read, Write, WriteRead}`, depending on the
// implementations of the underlying peripheral

// Now, this works! :+1:
let port_a = Pcf8574(manager.acquire(), 0x39).unwrap();
let port_b = Pcf8574(manager.acquire(), 0x38).unwrap();
```

<hr>

In most `embedded-hal` compatible drivers, the driver takes either ownership or a mutable reference to the peripheral used to interact with a component, such as I2C or SPI. For some protocols, such as I2C, which might have multiple devices connected to the same peripheral, managing ownership can be difficult (see [embedded-hal/35] for discussion).

To address this, [@rahix] developed [shared-bus], a crate which provides safe shared access to these peripherals through the use of a mutex. This allows for access of the underlying peripheral in as many drivers as you need! Check out the [release blog post] for more details, and for examples on how to use this for your projects.


[@rahix]: https://github.com/Rahix
[embedded-hal/35]: https://github.com/rust-embedded/embedded-hal/issues/35
[shared-bus]: https://github.com/Rahix/shared-bus
[release blog post]: https://blog.rahix.de/001-shared-bus/

## The Embedded Rust Community is Growing!

<hr>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Happy Tuesday! Quick poll: What are you using <a href="https://twitter.com/hashtag/embedded?src=hash&amp;ref_src=twsrc%5Etfw">#embedded</a> <a href="https://twitter.com/rustlang?ref_src=twsrc%5Etfw">@rustlang</a> for right now?<br><br>RTs appreciated!</p>&mdash; Rust Embedded Working Group (@rustembedded) <a href="https://twitter.com/rustembedded/status/1052189142065405952?ref_src=twsrc%5Etfw">October 16, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<hr>

As we get closer to our goal of stable embedded development with Rust for the 2018 edition launch, the embedded community is ramping up. We did a quick twitter poll which received hundreds of responses, and heard from developers using or evaluating embedded rust for personal and work projects.

The [Embedded WG] has also grown, starting off this year with 8 developers on a single team, to a group of **27 developers** across **11 teams**, each with their own area of focus within the embedded rust space.

Now is a great time to start working with Embedded Rust, and we can't wait to see what the next year brings!

## `embedded-hal` Ecosystem Crates

As part of the [Weekly Driver Initiative], crates that are part of the `embedded-hal` ecosystem are now tracked in the [Awesome Embedded Rust] repository. Here is a current snapshot of what is available there:

| Type                      | Status    | Count | Diff |
| :---                      | :-----    | :---- | :--- |
| [Device Crates]           | released  | 16    | 0    |
| [HAL Impl Crates]         | released  | 13    | 0    |
| [Board Support Crates]    | released  | 11    | 0    |
| [Driver Crates Released]  | released  | 16    | +1   |
| [Driver Crates WIP]       | WIP       | 46    | +6   |
| [no-std crates]           | released  | 17    | +3   |

[Awesome Embedded Rust]: https://github.com/rust-embedded/awesome-embedded-rust
[Weekly Driver Initiative]: https://github.com/rust-embedded/wg/issues/39
[Device Crates]: https://github.com/rust-embedded/awesome-embedded-rust#device-crates
[HAL Impl Crates]: https://github.com/rust-embedded/awesome-embedded-rust#hal-implementation-crates
[Board Support Crates]: https://github.com/rust-embedded/awesome-embedded-rust#board-support-crates
[Driver Crates Released]: https://github.com/rust-embedded/awesome-embedded-rust#driver-crates
[Driver Crates WIP]: https://github.com/rust-embedded/awesome-embedded-rust#wip
[no-std crates]: https://github.com/rust-embedded/awesome-embedded-rust#no-std-crates

## Help Wanted

* Interested in implementing a new target for Embedded Rust? Nuvoton has a [development board] for the Cortex-M23. Check out the [thumbv8m tracking issue] if you want to help!

[development board]: https://direct.nuvoton.com/de/numaker-pfm-m2351
[thumbv8m tracking issue]: https://github.com/rust-embedded/wg/issues/88
